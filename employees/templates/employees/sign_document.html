{% extends "main/base.html" %}
{% load crispy_forms_filters %}
{% load static %}
{% block content %}
    <script src="{% static 'JS/form_preloader.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
    <script src="{% static 'JS/signature_utilities.js' %}"></script>
    <h1 class="mt-3">{{ employee.get_full_name }}</h1>
    <h3>Sign Below</h3>
    <div class="row mt-3">
        <div class="col">
            <form method="POST" role="form" action="{% if document_type %}{% url 'employee-sign-document' signature_method=signature_method record_id=record.id document_type=document_type %}{% else %}{% url 'employee-sign-document' signature_method=signature_method record_id=record.employee_id %}{% endif %}">
                {% csrf_token %}
                <div class="form-row">
                    <input type="hidden" value="{{ signature_method }}" name="signature_method">
                    <div class="form-group col-lg-6 col-12 pr-lg-3">
                        <div class="row justify-content-between">
                            <div class="col-4">
                                <p>Signature</p>
                            </div>
                            <div class="col-8 text-right">
                                <button class="btn btn-secondary btn-sm canvas-clear" type="button" data-canvas-type="other">Clear</button>
                                <button class="btn btn-secondary btn-sm canvas-undo" type="button" data-canvas-type="other">Undo</button>
                            </div>
                        </div>
                        <canvas class="border border-dark" id="other_canvas"></canvas>
                        <input type="hidden" value="{{ signature_method }}" name="signature_method">
                    </div>
                </div>
                <div class="form-row mb-3">
                    {% if signature_method == 'In Person' %}
                        <a href="{% url 'employee-account' record.employee.employee_id %}" class="account-content mr-2">
                            <div class="btn btn-secondary">
                                Cancel
                            </div>
                        </a>
                    {% endif %}
                    <button class="btn btn-primary" type="submit" value="Submit" id="submit_button">Submit</button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}